{% extends "accounting/base.html" %}

{% block content %}
<script type="text/javascript" src="/media/js/base.js"></script>
<script type="text/javascript" src="/media/js/cashier.js"></script>

<form id='form' name='form' method='post' >

<input type='hidden' id='id_account' name='account' value='' />
<input type='hidden' id='id_member' name='member' value='' />

<table id='table'>
<tr>
	<th>Account Name:</th>
	<td>
        <input type='text' size='40'        
			   id=account_name name=account_name
			   onclick='hide_ring (this);
                        show_message("account_name",
                                    "Typing will display matches.")'
			   onkeyup='get_accounts(this, event)'/>
	</td>
	<th>Reference:</th>
	<td>
		<input type='text' size='10' id='id_ref' name='ref'
			   onkeyPress='return no_enter(event)' />
	</td>
</tr>
<tr>
	<th>Member Name:</th>
	<td>
		<input type='text' size='40' id='member_name' name='member_name'
			   onclick='get_account_members(event)'
			   onkeyup='get_members(event)' />
	</td>
    <td>
        <select id=id_debit_type name=debit_type >
            <option value='N' selected>Select Payment</option>
            {% for v, t in debit_choices %}
                <option value={{ v }} >{{ t }}</option>
            {% endfor %}
        </select>
    </td>
	<td>
		<input type='text' size='10' id='id_debit' name='debit' value='00'
			   		  onclick='hide_message(); hide_ring(this)'
					  onkeyPress='return no_enter(event)'/>
	</td>
</tr>
<tr>
	<th>Note:</th>
	<td >
		<input type='text' size='40' id='id_note' name='note' value='' 
			   onkeyPress='return no_enter(event)'/>
	</td>
    <td>
        <select id=id_credit_type name=credit_type >
            <option value='N' selected>Select Purchase</option>
            {% for v, t in credit_choices %}
                <option value={{ v }} >{{ t }}</option>
            {% endfor %}
        </select>
    </td>
	<td>
		<input type='text' size='10' id='id_credit' name='credit' value='00'
			   onclick='hide_message(); hide_ring(this)'
			   onkeyPress='return no_enter(event)'/>
	</td>
</tr>
<tr>
    <td colspan=4 >
        <input type='reset' value='Reset Form' >
        <input type='submit' value='Save Transaction' >
    </td>
</tr>
</table>
</form>

<div id='transactions' >

<h1>Today's Transactions</h1>
<table>
    <tr>
        <th>Trans ID</th>
        <th>Time</th>
        <th>Account</th>
        <th>Member</th>
        <th>Note</th>
        <th>Reference</th>
        <th>Type</th>
        <th>Purchase</th>
        <th>Payment</th>
        <th>Account<br />Balance</th>
    </tr>
    {% for trans in transactions|dictsortreversed:"id" %}
    <tr>
        <td>{{ trans.id }}</td>
        <td>{{ trans.date|date:"g:i:s A" }}</td>    
        <td>{{ trans.account }}</td>
        <td>{{ trans.member }}</td>
        <td>{{ trans.note }}</td>
        <td>{% if trans.ref %}
                {{ trans.ref }}
            {% endif %}
        </td>
        <td>{% ifnotequal trans.credit_type "N" %}
                {{ trans.get_credit_type_display }}
            {% endifnotequal %}
            {% ifnotequal trans.debit_type "N" %}
                {{ trans.get_debit_type_display }}
            {% endifnotequal %}
        </td>
        <td>{% ifnotequal trans.credit 0 %}
                {{ trans.credit }}
            {% endifnotequal %}
        </td>
        <td>{% ifnotequal trans.debit 0 %}
                {{ trans.debit }}
            {% endifnotequal %}
        </td>
        <td>{{ trans.balance }}</td>
    </tr>
    {% endfor %}
</table>
</div>

<div id=list ></div>
<div id=listShadow ></div>

<div id='message' onclick='hide_message ()' ></div>

{% endblock %}
