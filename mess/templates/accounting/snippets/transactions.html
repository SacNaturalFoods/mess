{% load messmoney %}

<table class="data" >
  <tr>
    <th>ID</th>
    <th>Time</th>
    <th>Account</th>
    <th>Member</th>
    <th>Note</th>
    <th>Purchase Type</th>
    <th>Purchase Amount</th>
    <th>Payment Type</th>
    <th>Payment Amount</th>
    <th>Account<br />Balance</th>
    <th>Entered<br />By</th>
  </tr>
  {% if transactions %}
    {% for transaction in transactions|dictsortreversed:"id" %}
  <tr class="{% cycle 'odd' 'even' %}" >
    <td>{{ transaction.id }}</td>
    <td class="nowrap">{{ transaction.timestamp|date:"g:i A" }}</td>
    <td><a href="{{ transaction.account.get_absolute_url }}">{{ transaction.account }}</a></td>
    <td>{% if transaction.member %}<a href="{{ transaction.member.get_absolute_url }}">{{ transaction.member }}</a>{% endif %}</td>
    <td>{{ transaction.note }}</td>
    <td>{{ transaction.get_purchase_type_display }}</td>
    <td>{% if transaction.purchase_amount %}{{ transaction.purchase_amount|messmoney }}{% endif %}</td>
    <td>{{ transaction.get_payment_type_display }}</td>
    <td>{% if transaction.payment_amount %}{{ transaction.payment_amount|messmoney:"payment" }}{% endif %}</td>
    <td>{{ transaction.account_balance|messmoney }}</td>
    <td>{{ transaction.entered_by.username }}{% if can_reverse %}<input type="button" value="X" onclick="reverseit({{ transaction.id }}, {{ transaction.account.id }}, '{{ transaction.account }}', '{{ transaction.purchase_type }}', {{ transaction.purchase_amount }}, '{{ transaction.payment_type }}', {{ transaction.payment_amount }});">{% endif %}</td>
  </tr>
    {% endfor %}
  {% endif %}
</table>

