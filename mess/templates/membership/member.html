{% extends "base.html" %}

{% block content %}
  <div id="left-column">
    <ul id="local-nav">
      <li><a class="active" href="{% url members %}">Members</a></li>
      <li class="last-item"><a href="{% url accounts %}">Accounts</a></li>
    </ul>
    <div id="primary-content-wrapper">
      <h2>Member Profile</h2>
      <div class="profile {% ifnotequal member.status "a" %}profile-inactive{% endifnotequal %}">
        <div class="profile-links">
          <h5>Accounts</h5>
          <ul>
            {% for am in member.accountmember_set.all %}
              <li{% if am.account_contact %} id="primary-acct"{% endif %}><a href="{% url account am.account.id %}">{{ am.account }}</a></li>
            {% endfor %}
          </ul>
        </div>
        <h4>
          {% if user.is_staff %}	
          <a href="{% url member-edit member.user.username %}">edit</a>
          {% endif %}
          {{ member.user.get_full_name }} 
        </h4>
        <ul class="quick-info">
          <li><img src="{{ MEDIA_URL }}images/twotiny/icon-question-mark.gif" alt="Status"/>{{ member.get_status_display }}</li>
          <li><img src="{{ MEDIA_URL }}images/twotiny/icon-clipboard.gif" alt="Work Status"/>{{ member.get_work_status_display }}</li>
          <li><img src="{{ MEDIA_URL }}images/twotiny/icon-key.gif" alt="Has Key"/>{{ member.has_key }}</li>
          <li><img src="{{ MEDIA_URL }}images/twotiny/icon-calendar.gif" alt="Date Joined"/>{{ member.date_joined }}</li>
        </ul>
        <div class="details clearfix">
		  <ul class="edit-contact-info">
			{% for medium in contact_media %}
			<li>
              <a class="add" href="{% url membership-add-contact member.user.username,medium %}">add {{medium}}</a>
            </li>
			{% endfor %}
	      </ul>
          {% for address in member.addresses.all %}
            {% include "membership/snippets/address.html" %}
          {% endfor %}
          <p>
          {% for email in member.emails.all %}
            <a href="mailto:{{ email }}">{{ email }}</a> ({{ email.get_type_display }})
            <a class="edit" href="{% url membership-edit-email member.user.username,email.id %}">edit</a>
            <a class="remove" href="{% url membership-remove-email member.user.username,email.id %}">remove</a>
            <br />
          {% endfor %}
          </p>
          <p>
          {% for phone in member.phones.all %}
            {{ phone }} ({{ phone.get_type_display }})
            <a class="edit" href="{% url membership-edit-phone member.user.username,phone.id %}">edit</a>
            <a class="remove" href="{% url membership-remove-phone member.user.username,phone.id %}">remove</a>
            <br />
          {% endfor %} 
          </p>
        </div>
      </div>
    </div>
  </div>
  <div id="right-column">
    <h3>Icon Key</h3>
    <ul id="icon-key">
      <li><img src="{{ MEDIA_URL }}images/twotiny/icon-question-mark.gif"/>Status</li>
      <li><img src="{{ MEDIA_URL }}images/twotiny/icon-clipboard.gif"/>Work status</li>
      <li><img src="{{ MEDIA_URL }}images/twotiny/icon-key.gif"/>Has key</li>
      <li><img src="{{ MEDIA_URL }}images/twotiny/icon-calendar.gif"/>Date joined</li>
      <li id="primary-acct-key"><img src="{{ MEDIA_URL }}images/bg-icon-primary-acct.png"/>Deposit holder for account</li>
     </ul>
  </div>
{% endblock %}
