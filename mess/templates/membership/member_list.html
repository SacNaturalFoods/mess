{% extends "base.html" %}

{% block content %}
<div id="double-column">
  <div id="primary-content-wrapper">
    <h2>Member List</h2>
    <form class="standard" method="GET">
      <ul>
        <li>
          <label for="id_search">Search:</label> {{ form.search }} 
          <label for="id_sort_by">Sort by:</label> {{ form.sort_by }}
        </li>
        <li>
          {{ form.active }} <label for="id_active">active</label>
          {{ form.inactive }} <label for="id_inactive">inactive</label>
          {{ form.missing }} <label for="id_missing">missing</label>
          {{ form.leave_of_absence }} 
            <label for="id_leave_of_absence">leave of absence</label>
          {{ form.quit }} <label for="id_quit">quit</label>
        </li>
        <li><input type="submit" value="Filter" class="button"/></li>
      </ul>
        <!--
        <table class="form-table">
        <tr>
            <th></th>
            <td><input type="submit" value="Filter" class="button"/></td>
        </tr>
        {% comment %}
        <tr>
          <th><label for="">Sort by:</label></th>
            <td>
              <select>
                <option/>
              </select>
            </td>
         </tr>
         <tr>
           <th><label for="">Show active:</label></th>
           <td><input type="checkbox" value=""/></td>
         </tr>
         <tr>
           <th><label for="">Show inactive</label></td>
           <td><input type="checkbox"/></td>
         </tr>
         <tr>
           <th><label>Show quit</label></th>
           <td><input type="checkbox" value=""/></td>
       </tr>
       {% endcomment %}
       </table>
       -->
     </form>  
    {% include "snippets/pagination.html" %}
    <table class="data">
          <tr>
        <th>Name</th>
        <th>Accounts</th>
        <th>Job</th>
        <th>Current<br /> Status</th>
        <th>Email</th>
        <th>Phone</th>
      </tr>    
          {% for member in page.object_list %}
      <tr class="{% cycle 'odd' 'even' %}">
        <td>
          <a href='{% url member member.user.username %}'>{{ member }}</a>
        </td>
        <td>
           <ul>
             {% for account in member.accounts.all %}
                 <li><a href="{% url account account.id %}">{{ account }}</a></li>
             {% endfor %}
           </ul>
        </td>
        <td>{{ member.job }}</td>
        <td>{{ member.get_status_display }}</td>        
        <td>
            {% for email in member.person.emails.all %}
              {{ email.get_type_display }}: {{ email.email }}<br />
            {% endfor %}
          </td>
          <td>
            {% for phone in member.person.phones.all %}
              {{ phone.get_type_display }}: {{ phone.number }}
              {% if phone.ext %}
                Ext: {{ phone.ext }}
              {% endif %}
              <br />
            {% endfor %}
          </td>     
        </tr>
      {% endfor %}
    </table>
    {% include "snippets/pagination.html" %}
  </div>
</div>
{% endblock %}

